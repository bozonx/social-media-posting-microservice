# Конфигурация микросервиса постинга в социальные сети
# Этот файл является источником истины для структуры конфигурации

# ============================================
# ОБЩИЕ ПАРАМЕТРЫ
# ============================================
common:
  # Таймаут соединения с провайдером (сек)
  connectionTimeoutSecs: 45
  
  # Таймаут запроса (сек)
  requestTimeoutSecs: 60

  # Автоматическая конвертация body (по умолчанию)
  convertBody: true
  
  # Количество попыток при ошибке
  retryAttempts: 3
  
  # Задержка между попытками (мс)
  retryDelayMs: 1000
  
  # Примечание: Jitter для retry (±20%) захардкожен в коде
  # Фактическая задержка будет: retryDelayMs * random(0.8, 1.2)

# ============================================
# НАСТРОЙКИ КОНВЕРТАЦИИ
# ============================================
conversion:
  # Сохранять ссылки при конвертации
  preserveLinks: true
  
  # Удалять HTML теги при конвертации в text
  stripHtml: false

# ============================================
# ПРИМЕЧАНИЕ О МЕДИА
# ============================================
# Обработка и конвертация медиа не реализованы в текущей версии
# Медиа-файлы передаются платформам по URL as-is
# В будущих версиях возможно добавление:
# - Конвертации изображений
# - Сжатия изображений
# - Конвертации видео

# ============================================
# НАСТРОЙКИ ПРОВАЙДЕРОВ ПО УМОЛЧАНИЮ
# ============================================
providers:
  telegram:
    sdkVersion: latest
    maxRetries: 3

# ============================================
# КАНАЛЫ (ИМЕНОВАННЫЕ КОНФИГУРАЦИИ)
# ============================================
channels:
  # Telegram канал компании
  company_telegram:
    # Имя провайдера
    provider: telegram
    
    # Включен ли канал
    enabled: true
    
    # Авторизация (секреты передаются через переменные окружения)
    auth:
      botToken: ${TELEGRAM_BOT_TOKEN}
      chatId: ${TELEGRAM_CHAT_ID}

    # Режим парсинга для Telegram
    parseMode: HTML
    
    # Отключить уведомления по умолчанию
    disableNotification: false
    
    # Конвертировать body автоматически
    convertBody: true
    
    # Формат body по умолчанию
    bodyFormat: html

    # Максимальная длина текста сообщения
    maxTextLength: 4096
    
    # Максимальная длина подписи к медиа
    maxCaptionLength: 1024
  
  # Остальные социальные сети будут добавлены в следующих версиях
