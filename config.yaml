# Конфигурация микросервиса постинга в социальные сети
# Этот файл является источником истины для структуры конфигурации

# ============================================
# ОБЩИЕ ПАРАМЕТРЫ
# ============================================
common:
  # Таймаут соединения с провайдером (сек)
  connectionTimeoutSecs: 45
  
  # Таймаут запроса (сек)
  requestTimeoutSecs: 60

  # Автоматическая конвертация body (по умолчанию)
  convertBody: true
  
  # Количество попыток при ошибке
  retryAttempts: 3
  
  # Задержка между попытками (мс)
  retryDelayMs: 1000
  
  # Примечание: Jitter для retry (±20%) захардкожен в коде
  # Фактическая задержка будет: retryDelayMs * random(0.8, 1.2)

# ============================================
# НАСТРОЙКИ КОНВЕРТАЦИИ
# ============================================
conversion:
  # Сохранять ссылки при конвертации
  preserveLinks: true
  
  # Удалять HTML теги при конвертации в text
  stripHtml: false

# ============================================
# ПРИМЕЧАНИЕ О МЕДИА
# ============================================
# Обработка и конвертация медиа не реализованы в текущей версии
# Медиа-файлы передаются платформам по URL as-is
# В будущих версиях возможно добавление:
# - Конвертации изображений
# - Сжатия изображений
# - Конвертации видео

# ============================================
# НАСТРОЙКИ ПРОВАЙДЕРОВ ПО УМОЛЧАНИЮ
# ============================================
providers:
  telegram:
    sdkVersion: latest
    maxRetries: 3

# ============================================
# КАНАЛЫ (ИМЕНОВАННЫЕ КОНФИГУРАЦИИ)
# ============================================
channels:
  # Telegram канал компании
  company_telegram:
    # Имя провайдера
    provider: telegram
    
    # Включен ли канал
    enabled: true
    
    # Авторизация (секреты передаются через переменные окружения)
    auth:
      botToken: ${TELEGRAM_BOT_TOKEN}
      chatId: ${TELEGRAM_CHAT_ID}
    
    # Опции провайдера
    options:
      # Режим парсинга для Telegram
      parseMode: HTML
      
      # Отключить уведомления по умолчанию
      disableNotification: false
      
      # Конвертировать body автоматически
      convertBody: true
      
      # Формат body по умолчанию
      bodyFormat: html
    
    # Лимиты платформы
    limits:
      # Максимальная длина текста сообщения
      maxTextLength: 4096
      
      # Максимальная длина подписи к медиа
      maxCaptionLength: 1024
  
  # Остальные социальные сети будут добавлены в следующих версиях
  # Примеры структуры для других провайдеров:
  
  # company_vk:
  #   provider: vk
  #   enabled: false
  #   auth:
  #     accessToken: ${VK_ACCESS_TOKEN}
  #     groupId: ${VK_GROUP_ID}
  #   options:
  #     fromGroup: true
  #     convertBody: true
  #     bodyFormat: text
  
  # personal_twitter:
  #   provider: x
  #   enabled: false
  #   auth:
  #     apiKey: ${X_API_KEY}
  #     apiSecret: ${X_API_SECRET}
  #     accessToken: ${X_ACCESS_TOKEN}
  #     accessTokenSecret: ${X_ACCESS_TOKEN_SECRET}
  #   options:
  #     convertBody: true
  #     bodyFormat: text
  #   limits:
  #     maxTextLength: 280
