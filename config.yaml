# Social Media Posting Microservice Configuration
# This file is the source of truth for the configuration structure

# ============================================
# COMMON PARAMETERS
# ============================================
common:
  # Connection timeout with provider (seconds)
  # Maximum time to wait for establishing a connection to the platform API
  connectionTimeoutSecs: 45
  
  # Request timeout (seconds)
  # Maximum time to wait for a complete API request/response cycle
  requestTimeoutSecs: 60

  # Automatic body conversion (default)
  # If true, automatically converts body content to the platform's preferred format
  convertBody: true
  
  # Number of retry attempts on error
  # How many times to retry a failed request before giving up
  retryAttempts: 3
  
  # Delay between retry attempts (milliseconds)
  # Base delay before retrying a failed request
  retryDelayMs: 1000
  
  # Time-to-live for idempotency records in cache (minutes)
  # How long to keep idempotency keys in cache to prevent duplicate posts
  idempotencyTtlMinutes: 10
  
  # Note: Jitter for retry (Â±20%) is hardcoded in the implementation
  # Actual delay will be: retryDelayMs * random(0.8, 1.2)

# ============================================
# CONVERSION SETTINGS
# ============================================
conversion:
  # Preserve links during conversion
  # If true, keeps hyperlinks intact when converting between formats
  preserveLinks: true
  
  # Strip HTML tags when converting to text
  # If true, removes all HTML tags; if false, keeps safe HTML tags
  stripHtml: false

# ============================================
# MEDIA PROCESSING NOTE
# ============================================
# Media processing and conversion are not implemented in the current version
# Media files are passed to platforms by URL as-is
# Future versions may include:
# - Image conversion
# - Image compression
# - Video conversion

# ============================================
# DEFAULT PROVIDER SETTINGS
# ============================================
providers:
  telegram:
    # SDK version to use (not currently enforced)
    sdkVersion: latest
    # Maximum retries for this provider (not currently used)
    maxRetries: 3

# ============================================
# CHANNELS (NAMED CONFIGURATIONS)
# ============================================
channels:
  # Company Telegram channel
  company_telegram:
    # Provider name
    # Must match one of the supported providers (currently: telegram)
    provider: telegram
    
    # Whether this channel is enabled
    # Disabled channels cannot be used for posting
    enabled: true
    
    # Authentication (bot token and chat ID)
    # You can use environment variables: ${MY_CUSTOM_VAR}
    auth:
      # Telegram bot token from @BotFather
      botToken: your_bot_token_here
      # Chat ID or channel username (with @ prefix for public channels)
      chatId: '@your_channel_username'

    # Parse mode for Telegram
    # Options: HTML, Markdown, MarkdownV2
    # Determines how text formatting is interpreted
    parseMode: HTML
    
    # Disable notifications by default
    # If true, posts will be sent silently without notifying subscribers
    disableNotification: false
    
    # Convert body automatically
    # If true, converts body to the format specified by parseMode
    convertBody: true
    
    # Default body format
    # Format of the body content before conversion (html, markdown, or text)
    bodyFormat: html

    # Maximum text message length
    # Telegram's limit for text-only messages
    maxTextLength: 4096
    
    # Maximum caption length for media
    # Telegram's limit for captions on photos, videos, etc.
    maxCaptionLength: 1024
  
  # Additional social networks will be added in future versions
